@using WebTaskMaster.Models.Project
@model IEnumerable<WebTaskMaster.Models.Project.ProjectModel>

@{
    ViewData["Title"] = "Projects List:";
}

<div class="container text-center text-wrap text-break ">
    <div class="row justify-content-center">
        <h1 class="col-12 col-sm-6 col-lg-8 offset-lg-1">Projects List:</h1>

        @* Create Project Modal button  *@
        <button class="btn btn-orange col-12 col-sm-3 col-lg-2 offset-lg-1" type="button"
                data-bs-toggle="modal" data-bs-target="#createProjectModal">
            Add project
        </button>
    </div>

    @{
        var projectNum = 0;

        foreach (var project in Model)
        {
            projectNum++;

            <div class="row justify-content-start my-2 px-2 py-2 color-blue bg-opacity-25">
                <a class="btn btn-outline-secondary fs-5 col-12 col-sm-1 "
                   asp-action="Details" asp-route-projectId="@project.Id"
                   data-bs-toggle-tooltip="tooltip" data-bs-trigger="hover" data-bs-title="Project details">
                    @projectNum
                </a>

                <p class="col-12 col-sm-10 col-md-4 col-xl-3 h5">@project.Name</p>
                <p class="col-12 col-sm-3 col-md-4 col-xl-6 h5">@project.Description</p>
              @*  <p class="col-12 col-md-3 col-md-4 col-xl-3"> @project.ProjectTeam</p>
                <p class="col-12 col-md-3 col-md-4 col-xl-3"> @project.Tasks</p> *@
            </div>
        }
    }
</div>

@*  Create Project Modal *@
<partial name="_CreatePartial" model="new ProjectModel()" />

<partial name="_ToastPartial" />

@section Scripts
    {
    @{
        var modalBtnId = ViewData["ActivateModal"] switch
        {
            "Create" => "createProjectModal",
            _ => null
        };

        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }

    @* Activate modal on page load. Needed to display server side validation result. *@
    @if (modalBtnId is not null)
    {
        <script type="text/javascript">
            $(document).ready(function () {
                document.getElementById("@modalBtnId").click();
            });
        </script>
    }

    @* tooltips *@
    <script type="text/javascript">
        tooltipTriggerList = document.querySelectorAll('[data-bs-toggle-tooltip="tooltip"]');
        tooltipList = [...tooltipTriggerList].map(tooltipTriggerEl => new bootstrap.Tooltip(tooltipTriggerEl));
    </script>
    }



