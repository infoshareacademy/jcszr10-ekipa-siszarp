@using Manage_tasks_Biznes_Logic.Dtos.Team
@using Humanizer

@model ICollection<TeamBasicDto>

@{
    ViewData["Title"] = "Teams";
}

<div class="container text-center">
    <div class="row justify-content-center">
        <h1 class="col-12 col-md-6 offset-md-3 col-xxl-8 offset-xxl-2">Teams</h1>

        <div class="col-12 col-md-3 col-xxl-2 d-grid">
            <a class="btn btn-primary fs-5" asp-action="Add">Add team</a>
        </div>
    </div>

    <div class="row row-cols-1 row-cols-md-2 row-cols-xl-3 row-cols-xxl-4 justify-content-start text-wrap text-break">
        @foreach (var team in Model)
        {
            <div class="col-12 my-2">
                <div class="card h-100 border-primary border-2">
                    <h5 class="card-header">@team.Name</h5>

                    <div class="card-body">
                        @if (team.Description is not null)
                        {
                            <p class="card-text">@team.Description.Truncate(100)</p>
                        }

                        <p class="card-text">
                            <span>Number of members:</span>
                            <span>@team.NumberOfMembers</span>
                        </p>
                    </div>

                    @if (team.Leader is not null)
                    {
                        var leader = team.Leader;

                        <ul class="list-group list-group-flush">
                            <li class="list-group-item">
                                <span>Leader</span>
                            </li>

                            <li class="list-group-item">
                                <span>@leader.FirstName</span>
                                <span>@leader.LastName</span>
                            </li>
                        </ul>
                    }

                    <div class="card-footer">
                        <a class="btn btn-primary" asp-action="Details" asp-route-teamId="@team.TeamId">Details</a>
                    </div>
                </div>
            </div>
        }
    </div>
</div>

<partial name="_ToastPartial" />

@section Scripts
    {
    @* show toast for team add response *@
    @if (TempData["ToastMessage"] is not null)
    {
        <script type="text/javascript">
            bootstrap.Toast.getOrCreateInstance(document.getElementById('toast')).show();
        </script>
    }
}